{"version":1,"allow_edit":true,"plugins":[],"panes":[{"width":1,"row":{"1":1,"2":1,"3":1},"col":{"1":1,"2":1,"3":2},"col_width":1,"widgets":[{"type":"gauge","settings":{"title":"t","value":"var s=datasources[\"temperature\"][\"parameters\"].replace('\"','').replace('\"','')\n\nfunction hex(str, pos) {\n    var bytes = str.substr(pos * 2, 2);\n    return parseInt(bytes, 16);\n}\n\nfunction shex(str, pos) {\n    var bytes = str.substr(pos * 2, 2);\n    a = parseInt(bytes, 16);\n  if ((a & 0x8000) > 0) {\n   a = a - 0x10000;\n}\n return a; \n}\n\nfunction parseAmbientTemperature(str) {\n    var ambient = (hex(str, 2) + 0xff * hex(str, 3)) / 128.0;\n    //   console.log('temp', str, '->', t,  hex(str, 2),  hex(str, 3));\n    return ambient;\n}\n\nfunction parseTemperature(str, offset) {\n    var t = (hex(str, offset) + 0xff * hex(str, offset+1)) / 128.0;\n    return t;\n}\n\nfunction extractTargetTemperature(str, ambient) {\n    var twoByteValue = parseTemperature(str, 0);\n\n    var Vobj2 = twoByteValue;\n    //.doubleValue();\n    Vobj2 *= 0.00000015625;\n\n    var Tdie = ambient + 273.15;\n\n    var S0 = 5.593E-14;\t// Calibration factor\n    var a1 = 1.75E-3;\n    var a2 = -1.678E-5;\n    var b0 = -2.94E-5;\n    var b1 = -5.7E-7;\n    var b2 = 4.63E-9;\n    var c2 = 13.4;\n    var Tref = 298.15;\n    var S = S0*(1+a1*(Tdie - Tref)+a2*Math.pow((Tdie - Tref),2));\n    var Vos = b0 + b1*(Tdie - Tref) + b2*Math.pow((Tdie - Tref),2);\n    var fObj = (Vobj2 - Vos) + c2*Math.pow((Vobj2 - Vos),2);\n    var tObj = Math.pow(Math.pow(Tdie,4) + (fObj/S),.25);\n\n    return tObj - 273.15;\n}\n\nvar a = parseAmbientTemperature(s);\nvar t= extractTargetTemperature(s, a);\nreturn t.toFixed(3);\n\n","min_value":0,"max_value":100}}]},{"width":1,"row":{"3":1},"col":{"3":1},"col_width":1,"widgets":[{"type":"sparkline","settings":{"title":"t","value":"var s=datasources[\"temperature\"][\"parameters\"].replace('\"','').replace('\"','')\n\nfunction hex(str, pos) {\n    var bytes = str.substr(pos * 2, 2);\n    return parseInt(bytes, 16);\n}\n\nfunction shex(str, pos) {\n    var bytes = str.substr(pos * 2, 2);\n    a = parseInt(bytes, 16);\n  if ((a & 0x8000) > 0) {\n   a = a - 0x10000;\n}\n return a; \n}\n\nfunction parseAmbientTemperature(str) {\n    var ambient = (hex(str, 2) + 0xff * hex(str, 3)) / 128.0;\n    //   console.log('temp', str, '->', t,  hex(str, 2),  hex(str, 3));\n    return ambient;\n}\n\nfunction parseTemperature(str, offset) {\n    var t = (hex(str, offset) + 0xff * hex(str, offset+1)) / 128.0;\n    return t;\n}\n\nfunction extractTargetTemperature(str, ambient) {\n    var twoByteValue = parseTemperature(str, 0);\n\n    var Vobj2 = twoByteValue;\n    //.doubleValue();\n    Vobj2 *= 0.00000015625;\n\n    var Tdie = ambient + 273.15;\n\n    var S0 = 5.593E-14;\t// Calibration factor\n    var a1 = 1.75E-3;\n    var a2 = -1.678E-5;\n    var b0 = -2.94E-5;\n    var b1 = -5.7E-7;\n    var b2 = 4.63E-9;\n    var c2 = 13.4;\n    var Tref = 298.15;\n    var S = S0*(1+a1*(Tdie - Tref)+a2*Math.pow((Tdie - Tref),2));\n    var Vos = b0 + b1*(Tdie - Tref) + b2*Math.pow((Tdie - Tref),2);\n    var fObj = (Vobj2 - Vos) + c2*Math.pow((Vobj2 - Vos),2);\n    var tObj = Math.pow(Math.pow(Tdie,4) + (fObj/S),.25);\n\n    return tObj - 273.15;\n}\n\nvar a = parseAmbientTemperature(s);\nvar t= extractTargetTemperature(s, a);\nreturn t.toFixed(3);\n\n"}}]},{"width":1,"row":{"3":7},"col":{"3":1},"col_width":1,"widgets":[{"type":"text_widget","settings":{"title":"c","size":"regular","value":"var s=datasources[\"temperature\"][\"parameters\"].replace('\"','').replace('\"','')\n\nfunction hex(str, pos) {\n    var bytes = str.substr(pos * 2, 2);\n    return parseInt(bytes, 16);\n}\n\nfunction shex(str, pos) {\n    var bytes = str.substr(pos * 2, 2);\n    a = parseInt(bytes, 16);\n  if ((a & 0x8000) > 0) {\n   a = a - 0x10000;\n}\n return a; \n}\n\nfunction parseAmbientTemperature(str) {\n    var ambient = (hex(str, 2) + 0xff * hex(str, 3)) / 128.0;\n    //   console.log('temp', str, '->', t,  hex(str, 2),  hex(str, 3));\n    return ambient;\n}\n\nfunction parseTemperature(str, offset) {\n    var t = (hex(str, offset) + 0xff * hex(str, offset+1)) / 128.0;\n    return t;\n}\n\nfunction extractTargetTemperature(str, ambient) {\n    var twoByteValue = parseTemperature(str, 0);\n\n    var Vobj2 = 1.0 * twoByteValue;\n    //.doubleValue();\n    Vobj2 *= 0.00000015625;\n\n    var Tdie = ambient + 273.15;\n\n    var S0 = 5.593E-14;\t// Calibration factor\n    var a1 = 1.75E-3;\n    var a2 = -1.678E-5;\n    var b0 = -2.94E-5;\n    var b1 = -5.7E-7;\n    var b2 = 4.63E-9;\n    var c2 = 13.4;\n    var Tref = 298.15;\n    var S = S0*(1+a1*(Tdie - Tref)+a2*Math.pow((Tdie - Tref),2));\n    var Vos = b0 + b1*(Tdie - Tref) + b2*Math.pow((Tdie - Tref),2);\n    var fObj = (Vobj2 - Vos) + c2*Math.pow((Vobj2 - Vos),2);\n    var tObj = Math.pow(Math.pow(Tdie,4) + (fObj/S),.25);\n\n    return tObj - 273.15;\n}\n\nvar a = parseAmbientTemperature(s);\nvar t= extractTargetTemperature(s, a);\nreturn t.toFixed(2);\n\n","animate":true}}]}],"datasources":[{"name":"temperature","type":"DeviceHive","settings":{"server":"http://nn8353.pg.devicehive.com/api","accessKey":"wcV2Pq/DJc/7/m7+OxYKbg64lBmJAb5AKZIqD8sIEIU=","deviceIds":[{"value":"devicehive_ble_andoid"}]}}],"columns":3}